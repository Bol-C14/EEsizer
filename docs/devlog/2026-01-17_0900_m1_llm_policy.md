# 2026-01-17 09:00 â€” Milestone 1 LLM Patch Loop

## Scope

- Add LLM call operator (OpenAI + mock) with run-dir auditing artifacts.
- Add LLMPatchPolicy and Patch JSON parser/validator.
- Add example and tests for parser/operator/policy retry + mock integration.
- Update runtime layout and provenance docs for LLM stages.

## Files touched

- `src/eesizer_core/operators/llm/contracts.py`
- `src/eesizer_core/operators/llm/llm_call.py`
- `src/eesizer_core/operators/llm/__init__.py`
- `src/eesizer_core/policies/llm_patch.py`
- `src/eesizer_core/policies/llm_patch_parser.py`
- `src/eesizer_core/policies/__init__.py`
- `src/eesizer_core/strategies/patch_loop/strategy.py`
- `src/eesizer_core/api.py`
- `src/eesizer_core/__init__.py`
- `examples/run_patch_loop_llm.py`
- `tests/test_m1_patch_json_parser.py`
- `tests/test_m1_llm_call_operator_records_stage.py`
- `tests/test_m1_llm_patch_policy_retry.py`
- `tests/test_m1_llm_policy_integration_mock.py`
- `docs/policies/llm_patch.md`
- `docs/specs/11_runtime_layout.md`
- `docs/specs/25_artifact_provenance.md`
- `docs/specs/41_policy_strategy_contracts.md`
- `docs/templates/run_manifest.example.json`
- `docs/specs/schemas/run_manifest.example.json`

## Rationale & notes

- LLM calls are wrapped as an operator to preserve provenance and on-disk audit trails.
- LLMPatchPolicy retries on parse errors and never outputs netlists.
- Mock backend enables CI/test runs without API access.

## Migration / compatibility

- PatchLoopStrategy now includes `attempt` in `Observation.notes`.
- Run manifests may include LLM metadata fields in `environment`.
